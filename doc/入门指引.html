<h4 class=""><a name="%E5%AE%89%E8%A3%85%20yog2" href="#%E5%AE%89%E8%A3%85%20yog2">安装 yog2</a></h4><blockquote>
<p>需要先安装 <a href="http://nodejs.org">node</a>.</p>
</blockquote>
<pre><code class="hljs lang-bash">npm <span class="hljs-keyword">install</span> -g yog2
</code></pre>
<h4 class=""><a name="%E5%88%9B%E5%BB%BA%20project" href="#%E5%88%9B%E5%BB%BA%20project">创建 project</a></h4><p>yog2 project 是基础的运行框架，提供一些基础的配置和中间件管理。通过使用 yog2 提供的脚手架，可以快速创建一个基础的 yog2 project</p>
<pre><code class="hljs lang-bash">yog2 init <span class="hljs-keyword">project</span>
<span class="hljs-comment"># prompt: Enter your project name:  (yog)</span>
</code></pre>
<h4 class=""><a name="%E5%88%9B%E5%BB%BA%20app" href="#%E5%88%9B%E5%BB%BA%20app">创建 app</a></h4><p>yog2 app 是应用的业务代码，每一个 app 都是一个独立的子项目，包含了这个子项目中所有的前后端代码。我们可以利用 yog2 release 功能将 app 发布至 yog2 project 中来运行 app。</p>
<p>利用 yog2 的 app 拆分能力，我们可以将一个中大型规模的项目按照功能或业务划分为多个独立的 app ，每个 app 均可以独立开发、编译、部署。当项目的业务较简单时，也可以只使用一个 app 来管理代码。</p>
<pre><code class="hljs lang-bash">yog2 init app
# <span class="hljs-string">prompt:</span> Enter your app <span class="hljs-string">name:</span>  (home)
</code></pre>
<h4 class=""><a name="%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95" href="#%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95">开发调试</a></h4><h5 class=""><a name="%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96">安装依赖</a></h5><p>首先我们需要为 yog2 project 安装执行必须的依赖</p>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># 进入 yog project 目录</span>
<span class="hljs-built_in">cd</span> yog 
npm install
</code></pre>
<h5 class=""><a name="%E5%90%AF%E5%8A%A8%E6%A1%86%E6%9E%B6" href="#%E5%90%AF%E5%8A%A8%E6%A1%86%E6%9E%B6">启动框架</a></h5><p>然后我们就可以用开发调试模式启动 yog2 project，让运行框架可用</p>
<blockquote>
<p>切勿在生产环境使用开发调试模式启动 yog2 project，这样的行为将会引发安全问题。</p>
</blockquote>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># for linux</span>
<span class="hljs-title">npm</span> run <span class="hljs-built_in">debug</span>

<span class="hljs-comment"># for windows</span>
npm run <span class="hljs-built_in">debug</span>-win
</code></pre>
<p>yog2 project 的默认端口是 8085，你可以通过修改 <code>PORT</code> 环境变量或者直接修改 <code>app.js</code> 来指定端口。</p>
<p>此时如果我们访问 <code>http://127.0.0.1:8085</code> 由于我们并未部署应用，我们只会得到一个 404 页面。因此下一步我们就需要部署 app。</p>
<h5 class=""><a name="%E9%83%A8%E7%BD%B2%20app" href="#%E9%83%A8%E7%BD%B2%20app">部署 app</a></h5><p>由于启动 yog2 project 后会一直占用控制台，因此我们需要另外开启一个控制台去部署 app。</p>
<pre><code class="hljs lang-bash"><span class="hljs-comment"># 进入home目录</span>
cd home
yog2 release <span class="hljs-comment">--dest dev</span>
</code></pre>
<blockquote>
<p>yog2 release --dest dev 必须要求运行框架以调试模式启动后使用，否则无法正确的部署代码。</p>
</blockquote>
<p>再次访问 <code>http://127.0.0.1:8085</code> 我们就会看到网站已经正常提供服务了。</p>
<p>此外，如果我们在执行 yog2 release 命令时添加 <code>--watch</code> 参数，yog2 就会监听文件修改，并自动部署至 yog2 project 。通过 yog2 的热更新技术，只要是 app 中的代码，无论是静态资源还是后端模板亦或是后端逻辑，均无需重启 yog2 project 就可以生效。</p>
<pre><code class="hljs lang-bash"><span class="hljs-comment">yog2</span> <span class="hljs-comment">release</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">dest</span> <span class="hljs-comment">dev</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">watch</span>
</code></pre>
