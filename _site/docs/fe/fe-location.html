<!DOCTYPE html>
<html>
    <!--head-->
    <head>
      <!-- page title goes here -->
<title>YOG2 - 工业级 Node.js UI 层解决方案</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<!-- add your name or URL here -->
<meta name="author" content="fex@baidu.com">
<!-- add a description of your site/company/product here -->
<meta name="description" content="YOG2 - 工业级 Node.js UI 层解决方案">
<!-- add the keywords here that represent your site, an example few have been added -->
<meta name="keywords" content="node, nodejs, fis, fex">
<!-- add your name or URL here -->
<meta name="publisher" content="fex">
<meta name="rating" content="General">
<!-- Bootstrap -->
<link href="/yog2/css/bootstrap.css" rel="stylesheet" media="screen">
<!-- Theme styles -->
<link href="/yog2/css/styles.css" rel="stylesheet" media="screen">
<link href="/yog2/css/animate.min.css" rel="stylesheet" media="screen">
<link href="/yog2/css/font-awesome.min.css" rel="stylesheet" media="screen">
<!-- media-queries -->
<link href="/yog2/css/media-queries.css" rel="stylesheet" media="screen">
<!-- modernizr -->
<script src="/yog2/js/modernizr.custom.js"></script>
<script src="/yog2/js/wow.min.js"></script>

      <link rel="stylesheet" href="/yog2/css/github.css">
    </head>
    <!--head-->
  <body>
    <nav class="navbar" role="navigation">
    <!-- container -->
<div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">YOG2</a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse  navbar-collapse  navbar-ex1-collapse">
        <ul class="nav  navbar-nav">
            <li><a href="/yog2/">首页</a></li>
            <li><a href="/yog2/docs">文档</a></li>
            <li><a href="https://github.com/fex-team/yog2" target="_blank">Github</a></li>
            <li><a href="http://fis.baidu.com" target="_blank">FIS</a></li>
            <li><a href="http://fex.baidu.com" target="_blank">FEX</a></li>
        </ul>
    </div>
    <!-- /navbar-collapse -->
</div>
<!-- /container -->

    </nav>
    <div class="doc-wrap">
    <nav class="sidebar" data-spy="affix" data-offset-top="95">
    <ul>
        
        <li class="item-category">
            
            <a href="/yog2/docs/">
                快速入门
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                基础使用
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/basic/cli.html#命令行">
                命令行
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/basic/structure.html#目录结构">
                目录结构
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/basic/router.html#路由">
                路由
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/basic/mvc.html#mvc">
                MVC
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                插件系统
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/plugin-system/#插件系统">
                内置插件
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/plugin-system/#用户插件">
                用户插件
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/plugin-system/#插件配置">
                插件配置
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                内置功能
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/features/middleware.html#中间件管理">
                中间件管理
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/features/log.html#日志管理">
                日志管理
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/features/service.html#服务管理">
                服务管理
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                前端工程化
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/fe/engineering.html#前端工程化">
                目录规范
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/fe/engineering.html#三种语言能力">
                三种语言能力
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/fe/engineering.html#前端模块化">
                前端模块化
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/fe/backend-template.html#后端模板">
                后端模板
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/fe/optimizer.html#性能优化">
                性能优化
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                进阶功能
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/advance/pagelet.html#BigPipe">
                BigPipe
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/advance/pagelet.html#Quickling">
                Quickling
            </a>
            
        </li>
        
        <li class="item-category">
            
            <span>
                其他
            </span>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/reference.html#参考资料">
                参考资料
            </a>
            
        </li>
        
        <li class="item-sub">
            
            <a href="/yog2/docs/FAQ.html#faq">
                FAQ
            </a>
            
        </li>
        
    </ul>
</nav>
<div class="bottom-shadow"></div>

    <div class="doc-container">
      <div class="toc" data-spy="affix" data-offset-top="95"></div>
      <article class="doc-content codehilite">
      <h2 id="资源定位">资源定位</h2>

<h3 id="在html中定位资源">在html中定位资源</h3>

<blockquote>
<p>fis支持对html中的script、link、style、video、audio、embed等标签的src或href属性进行分析，一旦这些标签的资源定位属性可以命中已存在文件，则把命中文件的url路径替换到属性中，同时可保留原来url中的query查询信息。</p>
</blockquote>

<p>例如：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--源码：</span>
<span class="c">&lt;img title=&quot;百度logo&quot; src=&quot;images/logo.gif&quot;/&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;img</span> <span class="na">title=</span><span class="s">&quot;百度logo&quot;</span> <span class="na">src=</span><span class="s">&quot;/images/logo_74e5229.gif&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;demo.css&quot;&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;/demo_7defa41.css&quot;</span><span class="nt">&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;script type=&quot;text/javascript&quot; src=&quot;demo.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/demo_33c5143.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>值得注意的是， <strong>资源定位结果可以被fis的配置文件控制</strong>，比如添加配置，调整文件发布路径：</p>

<p><img src="https://raw.githubusercontent.com/fouber/fis-wiki-img/master/uri.png" alt="资源定位工作原理"></p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
    <span class="nx">roadmap</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">path</span> <span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="c1">//所有的js文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.js&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/js/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/js$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有的css文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.css&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/css/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/css$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有image目录下的.png，.gif文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="sr">/^\/images\/(.*\.(?:png|gif))/i</span><span class="p">,</span>
                <span class="c1">//发布到/static/pic/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/pic/$1&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>再次编译得到：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--源码：</span>
<span class="c">&lt;img title=&quot;百度logo&quot; src=&quot;images/logo.gif&quot;/&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;img</span> <span class="na">title=</span><span class="s">&quot;百度logo&quot;</span> <span class="na">src=</span><span class="s">&quot;/static/pic/logo_74e5229.gif&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;demo.css&quot;&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;/static/css/demo_7defa41.css&quot;</span><span class="nt">&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;script type=&quot;text/javascript&quot; src=&quot;demo.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/static/js/demo_33c5143.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>我们甚至可以让 <strong>url和发布目录不一致</strong>。比如：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
    <span class="nx">roadmap</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">path</span> <span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="c1">//所有的js文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.js&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/js/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/js$&amp;&#39;</span><span class="p">,</span>
                <span class="c1">//访问url是/mm/static/js/xxx</span>
                <span class="nx">url</span> <span class="o">:</span> <span class="s1">&#39;/mm/static/js$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有的css文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.css&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/css/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/css$&amp;&#39;</span><span class="p">,</span>
                <span class="c1">//访问url是/pp/static/css/xxx</span>
                <span class="nx">url</span> <span class="o">:</span> <span class="s1">&#39;/pp/static/css$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有image目录下的.png，.gif文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="sr">/^\/images\/(.*\.(?:png|gif))/i</span><span class="p">,</span>
                <span class="c1">//发布到/static/pic/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/pic/$1&#39;</span><span class="p">,</span>
                <span class="c1">//访问url是/oo/static/baidu/xxx</span>
                <span class="nx">url</span> <span class="o">:</span> <span class="s1">&#39;/oo/static/baidu$&amp;&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>再次编译得到：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--源码：</span>
<span class="c">&lt;img title=&quot;百度logo&quot; src=&quot;images/logo.gif&quot;/&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;img</span> <span class="na">title=</span><span class="s">&quot;百度logo&quot;</span> <span class="na">src=</span><span class="s">&quot;/oo/static/baidu/logo_74e5229.gif&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;demo.css&quot;&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;/pp/static/css/demo_7defa41.css&quot;</span><span class="nt">&gt;</span>

<span class="c">&lt;!--源码：</span>
<span class="c">&lt;script type=&quot;text/javascript&quot; src=&quot;demo.js&quot;&gt;&lt;/script&gt;</span>
<span class="c">编译后--&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/mm/static/js/demo_33c5143.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<h3 id="在js中定位资源">在js中定位资源</h3>

<blockquote>
<p>js语言中，可以使用编译函数 <strong>__uri(path)</strong> 来定位资源，fis分析js文件或 <strong>html中的script标签内内容</strong> 时会替换该函数所指向文件的线上url路径。</p>
</blockquote>

<ul>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;images/logo.gif&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="s1">&#39;/images/logo_74e5229.gif&#39;</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;demo.css&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="s1">&#39;/demo_7defa41.css&#39;</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;demo.js&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="s1">&#39;/demo_33c5143.js&#39;</span><span class="p">;</span>
</code></pre></div></li>
</ul>

<p><strong>资源定位结果可以被fis的配置文件控制</strong>，比如添加配置，调整文件发布路径：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
    <span class="nx">roadmap</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">path</span> <span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="c1">//所有的js文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.js&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/js/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/js$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有的css文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.css&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/css/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/css$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有image目录下的.png，.gif文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="sr">/^\/images\/(.*\.(?:png|gif))/i</span><span class="p">,</span>
                <span class="c1">//发布到/static/pic/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/pic/$1&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>再次编译得到：</p>

<ul>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;images/logo.gif&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="s1">&#39;/static/pic/logo_74e5229.gif&#39;</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;demo.css&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="s1">&#39;/static/css/demo_7defa41.css&#39;</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="nx">__uri</span><span class="p">(</span><span class="s1">&#39;demo.js&#39;</span><span class="p">);</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="s1">&#39;/static/js/demo_33c5143.js&#39;</span><span class="p">;</span>
</code></pre></div></li>
</ul>

<h3 id="在css中定位资源">在css中定位资源</h3>

<blockquote>
<p>fis编译工具会识别css文件或 <strong>html的style标签内容</strong> 中 <strong>url(path)</strong> 以及 <strong>src=path</strong> 字段，并将其替换成对应资源的编译后url路径</p>
</blockquote>

<ul>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;demo.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;/demo_7defa41.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(&#39;images/body-bg.png&#39;)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(&#39;/images/body-bg_1b8c3e0.png&#39;)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="n">_filter</span><span class="o">:</span><span class="n">progid</span><span class="o">:</span><span class="n">DXImageTransform</span><span class="o">.</span><span class="n">Microsoft</span><span class="o">.</span><span class="n">AlphaImageLoader</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s1">&#39;images/body-bg.png&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="n">_filter</span><span class="o">:</span><span class="n">progid</span><span class="o">:</span><span class="n">DXImageTransform</span><span class="o">.</span><span class="n">Microsoft</span><span class="o">.</span><span class="n">AlphaImageLoader</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s1">&#39;/images/body-bg_1b8c3e0.png&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></li>
</ul>

<p><strong>资源定位结果可以被fis的配置文件控制</strong>，比如添加配置，调整文件发布路径：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fis</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
    <span class="nx">roadmap</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">path</span> <span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="c1">//所有的css文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="s1">&#39;**.css&#39;</span><span class="p">,</span>
                <span class="c1">//发布到/static/css/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/css$&amp;&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="c1">//所有image目录下的.png，.gif文件</span>
                <span class="nx">reg</span> <span class="o">:</span> <span class="sr">/^\/images\/(.*\.(?:png|gif))/i</span><span class="p">,</span>
                <span class="c1">//发布到/static/pic/xxx目录下</span>
                <span class="nx">release</span> <span class="o">:</span> <span class="s1">&#39;/static/pic/$1&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>再次编译得到：</p>

<ul>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;demo.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;/static/css/demo_7defa41.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></li>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(&#39;images/body-bg.png&#39;)</span><span class="p">;</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(&#39;/static/pic/body-bg_1b8c3e0.png&#39;)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="k">background</span><span class="o">:</span> <span class="sx">url(&#39;/static/pic/body-bg_1b8c3e0.png&#39;)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>源码：</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="n">_filter</span><span class="o">:</span><span class="n">progid</span><span class="o">:</span><span class="n">DXImageTransform</span><span class="o">.</span><span class="n">Microsoft</span><span class="o">.</span><span class="n">AlphaImageLoader</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s1">&#39;images/body-bg.png&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></li>
<li><p>编译后</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.style</span> <span class="p">{</span>
    <span class="n">_filter</span><span class="o">:</span><span class="n">progid</span><span class="o">:</span><span class="n">DXImageTransform</span><span class="o">.</span><span class="n">Microsoft</span><span class="o">.</span><span class="n">AlphaImageLoader</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s1">&#39;/static/pic/body-bg_1b8c3e0.png&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></li>
</ul>

      <blockquote>
        <p>文章有错误？直接提交修改 <a target="_blank" href="https://github.com/fex-team/yog2/edit/gh-pages/docs/fe/fe-location.md">docs/fe/fe-location.md</a></p>
      </blockquote>
      </article>
      <!-- footer -->
<section class="footer  flush--top">
    <div class="container">
        <div class="row">
            <ul class="list-unstyled  col-12  col-sm-3  col-lg-2">
                <li><a href="oak@baidu.com">Email</a></li>
                <li><a href="https://github.com/fex-team/yog2/issues" target="_blank">Github Issue</a></li>
            </ul>
            <ul class="list-unstyled  col-12  col-sm-2  col-lg-2">
                <li><a href="/yog2/">首页</a></li>
                <li><a href="/yog2/docs">文档</a></li>
                <li><a href="https://github.com/fex-team/yog2" target="_blank">Github</a></li>
                <li><a href="http://fis.baidu.com" target="_blank">FIS</a></li>
                <li><a href="http://fex.baidu.com" target="_blank">FEX</a></li>
            </ul>
            <div class="col-12  col-sm-7  col-lg-5  col-lg-offset-3  text-left  hard--left">
                <h3 class="footer--main-logo">加入我们</h3> FEX 是百度「Web 前端研发部」的内部名称
                <br/> 其中 FE 是 Front End 的缩写，X 代表我们不仅关注前端技术，还更重视全端及全栈的能力。
                <br/> 如果你对这个团队感兴趣，可以 <a class="underline" target="_blank" href="http://fex.baidu.com/we-need-you/">点击这里</a>。
            </div>
        </div>
    </div>
</section>
<!-- footer -->

    </div>
    </div>

    <!-- jQuery -->
    <script src="/yog2/js/jquery.js"></script>
    <script src="/yog2/js/scrollspy.js"></script>
    <script src="/yog2/js/toc.js"></script>
    <!-- Bootstrap js -->
    <script src="/yog2/js/bootstrap.min.js"></script>
    <!-- Optionally enable responsive features in IE8. Respond.js can be obtained from https://github.com/scottjehl/Respond -->
    <script src="/yog2/js/respond.min.js"></script>

  </body>

</html>
